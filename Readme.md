Итоговая работа по курсу IaC.

Проект разворачивает инфраструктуру для платежного приложения (кластер СУБД PostgreSQL, два сервера приложений). 

После разворачивания ВМ в Яндекс Облаке, происходит настройка ВМ с помощью Ansible. Устанавливается и конфигурируется кластер etcd состоящий из трех нод. Устанавливается и конфигурируется кластер PosgreSQL + Patroni, состоящий из двух нод (мастер и реплика). Для реализации единой точки входа на СУБД разворачиваются две ВМ с HaProxy и KeepAlived + Virtual IP. HaProxy мониторят Patroni на предмет какая из нод СУБД является мастером, так же есть доступ только на чтение для отдельного порта. 

Инфраструктура управляется и настраивается через ВМ администратора, которая имеет "белый" IP. "Белый" IP так же у балансировщика трафика.
ВМ администратора разворачивается из образа, подготовленного Packer'ом. В котом установлен приватный ключ и Ansible.

В GitLab'е необходимо установить следующие переменные:
- yc_cloud - идентификатор Яндекс Облака
- yc_token - токен для доступа к Яндекс Облаку
- yc_folder - идентификатор каталога с продуктивным окружением
- yc_folder_test -идентификатор каталога с тестовым окружением
- yc_folder_load - идентификатор каталога с окружением для нагрузочного тестирования
- yc_folder_dev - идентификатор каталога с окружением для разработки
- YC_TOKEN - токен для доступа к Яндекс Облаку, используется для формирования динамического инвентори (ограничен сроком действия 12 часов)
- YC_SSH_KEY - путь до расположения закрытой части ключа
- TF_HTTP_PASSWORD - токен для доступа к API GitLab, используется для хранения стейтов Terraform
- id_ed25519 - закрытая часть ключа, для доступа к виртуальным машинам
- id_ed25519_pub - открытая часть ключа, для доступа к виртуальным машинам